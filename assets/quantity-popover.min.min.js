var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();if(!customElements.get("quantity-popover")){customElements.define("quantity-popover",function(_super){__extends(QuantityPopover,_super);function QuantityPopover(){var _this=_super.call(this)||this;_this.mql=window.matchMedia("(min-width: 990px)");_this.mqlTablet=window.matchMedia("(min-width: 750px)");_this.infoButtonDesktop=_this.querySelector(".quantity-popover__info-button--icon-only");_this.infoButtonMobile=_this.querySelector(".quantity-popover__info-button--icon-with-label");_this.popoverInfo=_this.querySelector(".quantity-popover__info");_this.closeButton=_this.querySelector(".button-close");_this.variantInfo=_this.querySelector(".quantity-popover-container");_this.eventMouseEnterHappened=false;if(_this.closeButton){_this.closeButton.addEventListener("click",_this.closePopover.bind(_this))}if(_this.popoverInfo&&_this.infoButtonDesktop&&_this.mql.matches){_this.popoverInfo.addEventListener("mouseenter",_this.closePopover.bind(_this))}if(_this.infoButtonDesktop){_this.infoButtonDesktop.addEventListener("click",_this.togglePopover.bind(_this));_this.infoButtonDesktop.addEventListener("focusout",_this.closePopover.bind(_this))}if(_this.infoButtonMobile){_this.infoButtonMobile.addEventListener("click",_this.togglePopover.bind(_this));_this.infoButtonMobile.addEventListener("focusout",_this.closePopover.bind(_this))}if(_this.infoButtonDesktop&&_this.mqlTablet.matches){_this.variantInfo.addEventListener("mouseenter",_this.togglePopover.bind(_this));_this.variantInfo.addEventListener("mouseleave",_this.closePopover.bind(_this))}return _this}QuantityPopover.prototype.togglePopover=function(event){event.preventDefault();if(event.type==="mouseenter"){this.eventMouseEnterHappened=true}if(event.type==="click"&&this.eventMouseEnterHappened)return;var button=this.infoButtonDesktop&&this.mql.matches?this.infoButtonDesktop:this.infoButtonMobile;var isExpanded=button.getAttribute("aria-expanded")==="true";button.setAttribute("aria-expanded",!isExpanded);this.popoverInfo.toggleAttribute("hidden");var isOpen=button.getAttribute("aria-expanded")==="true";button.classList.toggle("quantity-popover__info-button--open");if(isOpen&&event.type!=="mouseenter"){button.focus()}};QuantityPopover.prototype.closePopover=function(event){event.preventDefault();var isChild=this.variantInfo.contains(event.relatedTarget);var button=this.infoButtonDesktop&&this.mql.matches?this.infoButtonDesktop:this.infoButtonMobile;if(!event.relatedTarget||!isChild){button.setAttribute("aria-expanded","false");button.classList.remove("quantity-popover__info-button--open");this.popoverInfo.setAttribute("hidden","")}this.eventMouseEnterHappened=false};return QuantityPopover}(HTMLElement))}
