var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var CartDrawer=function(_super){__extends(CartDrawer,_super);function CartDrawer(){var _this=_super.call(this)||this;_this.addEventListener("keyup",function(evt){return evt.code==="Escape"&&_this.close()});_this.querySelector("#CartDrawer-Overlay").addEventListener("click",_this.close.bind(_this));_this.setHeaderCartIconAccessibility();return _this}CartDrawer.prototype.setHeaderCartIconAccessibility=function(){var _this=this;var cartLink=document.querySelector("#cart-icon-bubble");cartLink.setAttribute("role","button");cartLink.setAttribute("aria-haspopup","dialog");cartLink.addEventListener("click",function(event){event.preventDefault();_this.open(cartLink)});cartLink.addEventListener("keydown",function(event){if(event.code.toUpperCase()==="SPACE"){event.preventDefault();_this.open(cartLink)}})};CartDrawer.prototype.open=function(triggeredBy){var _this=this;if(triggeredBy)this.setActiveElement(triggeredBy);var cartDrawerNote=this.querySelector('[id^="Details-"] summary');if(cartDrawerNote&&!cartDrawerNote.hasAttribute("role"))this.setSummaryAccessibility(cartDrawerNote);setTimeout(function(){_this.classList.add("animate","active")});this.addEventListener("transitionend",function(){var containerToTrapFocusOn=_this.classList.contains("is-empty")?_this.querySelector(".drawer__inner-empty"):document.getElementById("CartDrawer");var focusElement=_this.querySelector(".drawer__inner")||_this.querySelector(".drawer__close");trapFocus(containerToTrapFocusOn,focusElement)},{once:true});document.body.classList.add("overflow-hidden")};CartDrawer.prototype.close=function(){this.classList.remove("active");removeTrapFocus(this.activeElement);document.body.classList.remove("overflow-hidden")};CartDrawer.prototype.setSummaryAccessibility=function(cartDrawerNote){cartDrawerNote.setAttribute("role","button");cartDrawerNote.setAttribute("aria-expanded","false");if(cartDrawerNote.nextElementSibling.getAttribute("id")){cartDrawerNote.setAttribute("aria-controls",cartDrawerNote.nextElementSibling.id)}cartDrawerNote.addEventListener("click",function(event){event.currentTarget.setAttribute("aria-expanded",!event.currentTarget.closest("details").hasAttribute("open"))});cartDrawerNote.parentElement.addEventListener("keyup",onKeyUpEscape)};CartDrawer.prototype.renderContents=function(parsedState){var _this=this;this.querySelector(".drawer__inner").classList.contains("is-empty")&&this.querySelector(".drawer__inner").classList.remove("is-empty");this.productId=parsedState.id;this.getSectionsToRender().forEach(function(section){var sectionElement=section.selector?document.querySelector(section.selector):document.getElementById(section.id);sectionElement.innerHTML=_this.getSectionInnerHTML(parsedState.sections[section.id],section.selector)});setTimeout(function(){_this.querySelector("#CartDrawer-Overlay").addEventListener("click",_this.close.bind(_this));_this.open()})};CartDrawer.prototype.getSectionInnerHTML=function(html,selector){if(selector===void 0){selector=".shopify-section"}return(new DOMParser).parseFromString(html,"text/html").querySelector(selector).innerHTML};CartDrawer.prototype.getSectionsToRender=function(){return[{id:"cart-drawer",selector:"#CartDrawer"},{id:"cart-icon-bubble"}]};CartDrawer.prototype.getSectionDOM=function(html,selector){if(selector===void 0){selector=".shopify-section"}return(new DOMParser).parseFromString(html,"text/html").querySelector(selector)};CartDrawer.prototype.setActiveElement=function(element){this.activeElement=element};return CartDrawer}(HTMLElement);customElements.define("cart-drawer",CartDrawer);var CartDrawerItems=function(_super){__extends(CartDrawerItems,_super);function CartDrawerItems(){return _super!==null&&_super.apply(this,arguments)||this}CartDrawerItems.prototype.getSectionsToRender=function(){return[{id:"CartDrawer",section:"cart-drawer",selector:".drawer__inner"},{id:"cart-icon-bubble",section:"cart-icon-bubble",selector:".shopify-section"}]};return CartDrawerItems}(CartItems);customElements.define("cart-drawer-items",CartDrawerItems);
