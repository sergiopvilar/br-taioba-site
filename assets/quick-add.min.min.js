var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();if(!customElements.get("quick-add-modal")){customElements.define("quick-add-modal",function(_super){__extends(QuickAddModal,_super);function QuickAddModal(){var _this=_super.call(this)||this;_this.modalContent=_this.querySelector('[id^="QuickAddInfo-"]');return _this}QuickAddModal.prototype.hide=function(preventFocus){if(preventFocus===void 0){preventFocus=false}var cartNotification=document.querySelector("cart-notification")||document.querySelector("cart-drawer");if(cartNotification)cartNotification.setActiveElement(this.openedBy);this.modalContent.innerHTML="";if(preventFocus)this.openedBy=null;_super.prototype.hide.call(this)};QuickAddModal.prototype.show=function(opener){var _this=this;opener.setAttribute("aria-disabled",true);opener.classList.add("loading");opener.querySelector(".loading__spinner").classList.remove("hidden");fetch(opener.getAttribute("data-product-url")).then(function(response){return response.text()}).then(function(responseText){var responseHTML=(new DOMParser).parseFromString(responseText,"text/html");_this.productElement=responseHTML.querySelector('section[id^="MainProduct-"]');_this.productElement.classList.forEach(function(classApplied){if(classApplied.startsWith("color-")||classApplied==="gradient")_this.modalContent.classList.add(classApplied)});_this.preventDuplicatedIDs();_this.removeDOMElements();_this.setInnerHTML(_this.modalContent,_this.productElement.innerHTML);if(window.Shopify&&Shopify.PaymentButton){Shopify.PaymentButton.init()}if(window.ProductModel)window.ProductModel.loadShopifyXR();_this.removeGalleryListSemantic();_this.updateImageSizes();_this.preventVariantURLSwitching();_super.prototype.show.call(_this,opener)}).finally(function(){opener.removeAttribute("aria-disabled");opener.classList.remove("loading");opener.querySelector(".loading__spinner").classList.add("hidden")})};QuickAddModal.prototype.setInnerHTML=function(element,html){element.innerHTML=html;element.querySelectorAll("script").forEach(function(oldScriptTag){var newScriptTag=document.createElement("script");Array.from(oldScriptTag.attributes).forEach(function(attribute){newScriptTag.setAttribute(attribute.name,attribute.value)});newScriptTag.appendChild(document.createTextNode(oldScriptTag.innerHTML));oldScriptTag.parentNode.replaceChild(newScriptTag,oldScriptTag)})};QuickAddModal.prototype.preventVariantURLSwitching=function(){var variantPicker=this.modalContent.querySelector("variant-radios,variant-selects");if(!variantPicker)return;variantPicker.setAttribute("data-update-url","false")};QuickAddModal.prototype.removeDOMElements=function(){var pickupAvailability=this.productElement.querySelector("pickup-availability");if(pickupAvailability)pickupAvailability.remove();var productModal=this.productElement.querySelector("product-modal");if(productModal)productModal.remove();var modalDialog=this.productElement.querySelectorAll("modal-dialog");if(modalDialog)modalDialog.forEach(function(modal){return modal.remove()})};QuickAddModal.prototype.preventDuplicatedIDs=function(){var sectionId=this.productElement.dataset.section;this.productElement.innerHTML=this.productElement.innerHTML.replaceAll(sectionId,"quickadd-".concat(sectionId));this.productElement.querySelectorAll("variant-selects, variant-radios, product-info").forEach(function(element){element.dataset.originalSection=sectionId})};QuickAddModal.prototype.removeGalleryListSemantic=function(){var galleryList=this.modalContent.querySelector('[id^="Slider-Gallery"]');if(!galleryList)return;galleryList.setAttribute("role","presentation");galleryList.querySelectorAll('[id^="Slide-"]').forEach(function(li){return li.setAttribute("role","presentation")})};QuickAddModal.prototype.updateImageSizes=function(){var product=this.modalContent.querySelector(".product");var desktopColumns=product.classList.contains("product--columns");if(!desktopColumns)return;var mediaImages=product.querySelectorAll(".product__media img");if(!mediaImages.length)return;var mediaImageSizes="(min-width: 1000px) 715px, (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)";if(product.classList.contains("product--medium")){mediaImageSizes=mediaImageSizes.replace("715px","605px")}else if(product.classList.contains("product--small")){mediaImageSizes=mediaImageSizes.replace("715px","495px")}mediaImages.forEach(function(img){return img.setAttribute("sizes",mediaImageSizes)})};return QuickAddModal}(ModalDialog))}
